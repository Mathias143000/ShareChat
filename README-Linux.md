# ShareChat

Файлообмен + чат. HTTP на порту 3000 (по умолчанию), drag-and-drop загрузка, сортировка файлов "новые сверху", кнопки удалить файл/все файлы и очистить чат, IP-белый список для чата.

## Запуск локально
```bash
npm install
npm start
# открой http://localhost:3000
```

## Переменные окружения
- PORT — порт HTTP (по умолчанию 3000)
- - MAX_FILE_MB — лимит размера загружаемого файла (по умолчанию 100)
- ALLOWED_IPS — список IP/CIDR, кому разрешён чат (например `192.168.1.25,10.0.0.0/24`). Пусто — всем можно.
- ADMIN_TOKEN — токен для `/api/purge` (не обязателен)

## Установка на Ubuntu 24.04 (systemd)
```bash
# из каталога проекта
sudo bash deploy/install.sh
# затем открывай http://<IP_СЕРВЕРА>:3000
```

Файл окружения: `/etc/default/sharechat`  
Сервис: `sharechat.service`

## Docker
```bash
docker compose up -d --build
# http://localhost:3000
```

### Редактирование доступа по IP из файла
Вы можете управлять доступом без переменных окружения, редактируя файл в корне проекта:
```bash
nano allowed_ips.txt
# добавьте IP или подсети (CIDR), по одному в строке
sudo systemctl restart sharechat
```
Если файл пустой (или отсутствует), доступ открыт для всех. Значения из `ALLOWED_IPS` также учитываются и суммируются с содержимым файла.
